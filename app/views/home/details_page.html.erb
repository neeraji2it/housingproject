<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <script src="/assets/jquery.min.js" type="text/javascript"></script>
  <link rel="stylesheet" href="/assets/device.css" />
  <link  href="/assets/font-awesome.css" rel="stylesheet" />
  <title>SVR FARMS - Cities</title>
  <script type="text/javascript">
    $(function() {
      var pull = $('#pull');
      var menu = $('nav ul');
      $(pull).on('click', function(e) {
        e.preventDefault();
        menu.slideToggle();
      });


      $(window).resize(function() {
        var w = $(window).width();
        if (w > 320 && menu.is(':hidden')) {
          menu.removeAttr('style');
        }
      });
    });
  </script>

  <script type="text/javascript">
    function validatePassword() {
      var validator = $("#contact").validate({
        rules: {
          name: "required",
          password: "required",
          Confirm_PasswordP: "required",
          email: "required",
          phone: "required"
        },
        messages:
                {
                  name: "Enter your Username",
                  password: "Please Enter your Password",
                  confirm_password: "Please Confirm your pass2word",
                  email: "Enter your Email id in Given Format",
                  phone: "Enter 10 digit phone Number"
                }

      });

      if (validator.form()) {
        alert('Sucess');
      }
    }

  </script>

  <script type="text/javascript">

    $(document).ready(function() {
      $("#button1").hide();
      $("#button2").hide();
      $("#button3").hide();
      $("#button4").hide();
      $("#inner-button1").hide();
      $("#inner-button2").hide();
      $("#inner-button3").hide();
      $("#inner-button4").hide();
      $("#btn1").click(function() {
        $("#button1").fadeToggle();
        $("#button2").hide();
        $("#button3").hide();
        $("#button4").hide();
        $(this).toggleClass('active')
      });
      $("#btn2").click(function() {
        $("#button2").fadeToggle();
        $("#button1").hide();
        $("#button3").hide();
        $("#button4").hide();
      });

      $("#btn3").click(function() {
        $("#button3").fadeToggle();
        $("#button1").hide();
        $("#button2").hide();
        $("#button4").hide();
        $("#inner-button1").hide();
        $("#inner-button2").hide();
        $("#inner-button3").hide();
        $("#inner-button4").hide();
      });
      $("#btn4").click(function() {
        $("#button4").fadeToggle();
        $("#button1").hide();
        $("#button2").hide();
        $("#button3").hide();
      });
      $("#inner-btn1").click(function() {
        $("#inner-button1").fadeToggle();
        $("#inner-button2").hide();
        $("#inner-button3").hide();
        $("#inner-button4").hide();
      });

      $("#inner-btn2").click(function() {
        $("#inner-button2").fadeToggle();
        $("#inner-button1").hide();
        $("#inner-button3").hide();
        $("#inner-button4").hide();
      });

      $("#inner-btn3").click(function() {
        $("#inner-button3").fadeToggle();
        $("#inner-button1").hide();
        $("#inner-button2").hide();
        $("#inner-button4").hide();
      });

      $("#inner-btn4").click(function() {
        $("#inner-button4").fadeToggle();
        $("#inner-button1").hide();
        $("#inner-button2").hide();
        $("#inner-button3").hide();
      });

    });
  </script>


  <style >
{
      background:url(/assets/mobbgh.jpg) no-repeat;
      background-size:1200px 100%;
      color:#fff;
    }


  </style>

</head>



<div class="container">


  <nav class="clearfix">
    <a href="#" id="pull">SVR FARMS</a>
    <ul class="clearfix">
      <li>
        <a href="<%= root_path(:device_type => :mobile)%>">
          Home
        </a>
      </li>
      <li><a href="/home/aboutus_mobile">About Us</a></li>
      <li><a href="/home/services_mobile">Services</a></li>
      <li><a href="/contactus/new">Contact Us</a></li>
    </ul>
  </nav>






 
  <!-- End SlidesJS Required: Start Slides -->

  <!--toggle starts here-->

  <div class="inner-addon right-addon">
    <div class=" left-addon">
      <button id="btn1">Key Information</button>
    </div>
  </div>
  <div id="button1" class="button1">
    <table>
      <tr>
        <td >Price<br /><i class="fa fa-inr"></i><%= @property.price %></td>
        <td >Rate<br /><i class="fa fa-inr"></i><%= @property.rate %>/sqft</td>
        <td >Area<br />	<%= @property.area %>Sqft</td>
      </tr>		
      <tr>
        <td>List By <%= @property.land_status %></td>
        <td >Type of Land <%= @property.type_of_land %></td>
      </tr>
    </table>
  </div>

  <div class="inner-addon right-addon">
    <div class=" left-addon">
      <button id="btn2" >Details</button>
    </div>
  </div>
  <div id="button2" >
    <div class="fourty-width">
      <h2>Image</h2>
    <%= link_to image_tag(@property.images.first.image.url(:original)),  image_slide_home_path(@property ) %>
      <h2>Description</h2>
       <%= @property.description.titleize %>
    </div>
  </div>
</div>

<div class="inner-addon right-addon">
  <div class="left-addon">
    <button id="btn3">Commute Options</button>
  </div>
</div>	

<div id="button3" >
  <div class="inner-buttons" id="inner-buttons"> 
    <div class="inner-addon right-addon">
      <i class="fa fa-angle-down"></i>
      <button id="inner-btn1" >Bus Station</button>
    </div>
    <div id="inner-button1" class="inner-button1">
      <div class="panel-body" id="bus_option">
        <% @distance1 = Geocoder::Calculations.distance_between([@property.latitude,@property.longitude], [@property.bus_lat,@property.bus_lng]).round(3) %>
        <%= @distance1.present? ? ("#{@distance1} miles") : ("None Found") %>
      </div>
    </div>
    <div class="inner-addon right-addon">
      <i class="fa fa-angle-down"></i>
      <button id="inner-btn2" >Train Station</button>
    </div>
    <div id="inner-button2" class="inner-button2">
      <div class="panel-body" id="train_option">
        <% @distance2 = Geocoder::Calculations.distance_between([@property.latitude,@property.longitude], [@property.train_lat,@property.train_lng]).round(3) %>
        <%= @distance2.present? ? ("#{@distance2} miles") : ("None Found") %>
      </div>
    </div>
    <div class="inner-addon right-addon">
      <i class="fa fa-angle-down"></i>
      <button id="inner-btn3" >Airports</button>
    </div>
    <div id="inner-button3" class="inner-button3">
      <div class="panel-body"  id="airport_option">
        <% @distance3 = Geocoder::Calculations.distance_between([@property.latitude,@property.longitude], [@property.airport_lat,@property.airport_lng]).round(3) %>
        <%= @distance3.present? ? ("#{@distance3} miles") : ("None Found") %>
      </div>
    </div>
    <div class="inner-addon right-addon">
      <i class="fa fa-angle-down"></i>
      <button id="inner-btn4" >Near By Location</button>
    </div>
    <div id="inner-button4" class="inner-button4">
      <ul>
        <% for property in @property.nearbys(100) %>
          <li><%= property.address.titleize %> (<%= property.distance.round(2) %> miles)</li>
        <% end %>
      </ul>
    </div>

  </div>
</div>

<div class="inner-addon right-addon">
  <div class=" left-addon">
    <button id="btn4" >Contact</button>
  </div>
</div>

<div id="button4">
  <div class="half-width">
    <%= form_for :contact, :url => '/contact', :method => 'post' do |f|   %>
      <p> <%= f.text_field :name, :class=>"form-control" ,:placeholder=>"Name", :title=>"Name"%> </p>
      <p> <%= f.text_field :email, :class=>"form-control", :placeholder=>"E-mail", :title=>"E-mail"%> </p>
      <p> <%= f.text_field :mobile, :class=>"form-control", :placeholder=>"Phone", :title=>"Phone"%> </p>
        <p class="top-spacing">
        <%= f.submit 'Send', :style => "background-color: green;", :title=>"Send"%>
            </p>
    <% end  %>
  </div>
</div>




<!-- toggle ends here-->
<div class="map-container">    
  <div id="map" style="max-width:95%; height: 199px;"></div>    
</div>
 
<div class="property-btn">
  <span style="padding:10px; color:#000">Got a Property? list for Free</span>
  <br />
  <a href="/properties/new" class="property-select">
    <button>List your Property</button>
  </a>
</div>

<footer>
  <ol>
    <li><a href="/home/aboutus_mobile" title="ABOUT US">About Us</a> </li>
    <li><a href="/home/services_mobile">Services</a></li>
    <li><a href="/contactus/new">Contact us</a> </li>
  </ol>
</footer>
 <div class="copyright">
    Copyright 2014. All Rights Reserved.
  </div>

</div>
<!-- SlidesJS Required: Link to jQuery -->
<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
<!-- End SlidesJS Required -->

<!-- SlidesJS Required: Link to jquery.slides.js -->
<script src="/assets/jquery.slides.min.js"></script>
<!-- End SlidesJS Required -->

<!-- SlidesJS Required: Initialize SlidesJS with a jQuery doc ready -->
<script>
        $(function() {
          $('#slides').slidesjs({
            width: 940,
            height: 528,
            play: {
              active: true,
              auto: true,
              interval: 4000,
              swap: true
            }
          });
        });
</script>


 <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
 <%= javascript_include_tag 'application' %>
      
<script type="text/javascript">
  var handler = Gmaps.build('Google');
  var mapOptions = {Zoom: 6, center: { lat: 13.612518, lng: 77.51549},mapTypeId: google.maps.MapTypeId.MAP};

  handler.buildMap({provider: mapOptions, internal: {id: 'map'}}, function() {
    // I assume this is the way you retrieve the amrkers array
    var json_data = <%=raw @hash.to_json %>;
    var markers = handler.addMarkers(json_data);

    _.each(json_data, function(json, index) {
      var marker = markers[index];
      json.marker = marker;
      google.maps.event.addListener(marker.getServiceObject(), 'click', function() {
        console.log(json);
                alert(json.id);
             window.location.href = '/home/land1?id=' +json.id ;
       handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    });
  });

</script>
