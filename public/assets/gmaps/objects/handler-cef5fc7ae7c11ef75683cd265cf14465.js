(function(){this.Gmaps.Objects.Handler=function(){function t(t,r){this.type=t,null==r&&(r={}),this.setPrimitives(r),this.setOptions(r),this.resetBounds()}return t.prototype.buildMap=function(t,r){return null==r&&(r=function(){}),this.map=this._builder("Map").build(t,function(t){return function(){return t._createClusterer(),r()}}(this))},t.prototype.addMarkers=function(t,r){return _.map(t,function(t){return function(e){return t.addMarker(e,r)}}(this))},t.prototype.addMarker=function(t,r){var e;return e=this._builder("Marker").build(t,r,this.marker_options),e.setMap(this.getMap()),this.clusterer.addMarker(e),e},t.prototype.addCircles=function(t,r){return _.map(t,function(t){return function(e){return t.addCircle(e,r)}}(this))},t.prototype.addCircle=function(t,r){return this._addResource("circle",t,r)},t.prototype.addPolylines=function(t,r){return _.map(t,function(t){return function(e){return t.addPolyline(e,r)}}(this))},t.prototype.addPolyline=function(t,r){return this._addResource("polyline",t,r)},t.prototype.addPolygons=function(t,r){return _.map(t,function(t){return function(e){return t.addPolygon(e,r)}}(this))},t.prototype.addPolygon=function(t,r){return this._addResource("polygon",t,r)},t.prototype.addKmls=function(t,r){return _.map(t,function(t){return function(e){return t.addKml(e,r)}}(this))},t.prototype.addKml=function(t,r){return this._addResource("kml",t,r)},t.prototype.removeMarkers=function(t){return _.map(t,function(t){return function(r){return t.removeMarker(r)}}(this))},t.prototype.removeMarker=function(t){return t.clear(),this.clusterer.removeMarker(t)},t.prototype.fitMapToBounds=function(){return this.map.fitToBounds(this.bounds.getServiceObject())},t.prototype.getMap=function(){return this.map.getServiceObject()},t.prototype.setOptions=function(t){return this.marker_options=_.extend(this._default_marker_options(),t.markers),this.builders=_.extend(this._default_builders(),t.builders),this.models=_.extend(this._default_models(),t.models)},t.prototype.resetBounds=function(){return this.bounds=this._builder("Bound").build()},t.prototype.setPrimitives=function(t){return this.primitives=void 0===t.primitives?this._rootModule().Primitives():_.isFunction(t.primitives)?t.primitives():t.primitives},t.prototype.currentInfowindow=function(){return this.builders.Marker.CURRENT_INFOWINDOW},t.prototype._addResource=function(t,r,e){var i;return i=this._builder(t).build(r,e),i.setMap(this.getMap()),i},t.prototype._clusterize=function(){return _.isObject(this.marker_options.clusterer)},t.prototype._createClusterer=function(){return this.clusterer=this._builder("Clusterer").build({map:this.getMap()},this.marker_options.clusterer)},t.prototype._default_marker_options=function(){return{singleInfowindow:!0,maxRandomDistance:100,clusterer:{maxZoom:5,gridSize:50}}},t.prototype._builder=function(t){var r;return t=this._capitalize(t),null==this[r="__builder"+t]&&(this[r]=Gmaps.Objects.Builders(this.builders[t],this.models[t],this.primitives)),this["__builder"+t]},t.prototype._default_models=function(){var t;return t=this._rootModule().Objects,this._clusterize()?t:(t.Clusterer=Gmaps.Objects.NullClusterer,t)},t.prototype._capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype._default_builders=function(){return this._rootModule().Builders},t.prototype._rootModule=function(){return null==this.__rootModule&&(this.__rootModule=Gmaps[this.type]),this.__rootModule},t}()}).call(this);